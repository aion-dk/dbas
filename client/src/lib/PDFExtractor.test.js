import { expect, test } from "vitest";
import PDFExtractor from "./PDFExtractor";

const text = `
Thankyouforvoting!VotingreceiptAssemblyVotingExampleElection-VotingRoundTwowaystotrackyourvoteScanQRCodeVisitWebsiteClickorentertheURLbelowhttp://localhost:3010/en/voting/ac523d14TrackingcodeforballottrackerMiMKekFRegisteredat:26July2024,13:54Receiptdata:eyJhZGRyZXNzIjoiZTUwOTcwYjEzNWQwNzk5NDBhYTZiZGIyNDE5ZDBhM2Q3YmVjNTA4NWIxODhmZGE5MTdiY2U3NTgxYjNmNDg2ZCIsInByZXZpb3VzX2FkZHJlc3MiOiJlNTA5NzBiMTM1ZDA3OTk0MGFhNmJkYjI0MTlkMGEzZDdiZWM1MDg1YjE4OGZkYTkxN2JjZTc1ODFiM2Y0ODZkIiwicGFyZW50X2FkZHJlc3MiOiJlNTA5NzBiMTM1ZDA3OTk0MGFhNmJkYjI0MTlkMGEzZDdiZWM1MDg1YjE4OGZkYTkxN2JjZTc1ODFiM2Y0ODZkIiwicmVnaXN0ZXJlZF9hdCI6IjIwMjQtMDctMjYgMTM6NTQ6NDEgKzAyMDAiLCJzaWduYXR1cmUiOiI5MDA2NDAxMzQ0NTgwNGQ0MDE4ZjczYTdjMzU2N2VkNGM2NTNmMTNlZTFhMDM0OTNhNWFlZDQyN2M5YzU2NWRmLDk0NmE4ZGUwNTczYzRmYjA4NmE5NWNkMDQ5YjZlODZmM2UyMjgwNTkxM2NjOTc2YWY2NDMxZmVjMmQ0MDExZjQiLCJkYmJfc2lnbmF0dXJlIjoiZDIwNmM4ZTQ0Y2VkMmI5M2FkNmY4Y2ZiMjc5YTRlZWRiY2UyYjNkN2Q5YWZmNWE4ZDk5Y2ZiYzM1YzBjZjgyYyw3MDQ5MjFjMjk4NjU4OTJlMGQyZmZmZTkzN2QxZTg3MzczYTIxOWY1NTliNTMzZDYyODY3OGEwMTQ4OWE5M2ZhIn0=

`

test("PDFExtractor#receipt", () => {
  const extractor = new PDFExtractor(text);
  expect(extractor.receipt()).toBe("eyJhZGRyZXNzIjoiZTUwOTcwYjEzNWQwNzk5NDBhYTZiZGIyNDE5ZDBhM2Q3YmVjNTA4NWIxODhmZGE5MTdiY2U3NTgxYjNmNDg2ZCIsInByZXZpb3VzX2FkZHJlc3MiOiJlNTA5NzBiMTM1ZDA3OTk0MGFhNmJkYjI0MTlkMGEzZDdiZWM1MDg1YjE4OGZkYTkxN2JjZTc1ODFiM2Y0ODZkIiwicGFyZW50X2FkZHJlc3MiOiJlNTA5NzBiMTM1ZDA3OTk0MGFhNmJkYjI0MTlkMGEzZDdiZWM1MDg1YjE4OGZkYTkxN2JjZTc1ODFiM2Y0ODZkIiwicmVnaXN0ZXJlZF9hdCI6IjIwMjQtMDctMjYgMTM6NTQ6NDEgKzAyMDAiLCJzaWduYXR1cmUiOiI5MDA2NDAxMzQ0NTgwNGQ0MDE4ZjczYTdjMzU2N2VkNGM2NTNmMTNlZTFhMDM0OTNhNWFlZDQyN2M5YzU2NWRmLDk0NmE4ZGUwNTczYzRmYjA4NmE5NWNkMDQ5YjZlODZmM2UyMjgwNTkxM2NjOTc2YWY2NDMxZmVjMmQ0MDExZjQiLCJkYmJfc2lnbmF0dXJlIjoiZDIwNmM4ZTQ0Y2VkMmI5M2FkNmY4Y2ZiMjc5YTRlZWRiY2UyYjNkN2Q5YWZmNWE4ZDk5Y2ZiYzM1YzBjZjgyYyw3MDQ5MjFjMjk4NjU4OTJlMGQyZmZmZTkzN2QxZTg3MzczYTIxOWY1NTliNTMzZDYyODY3OGEwMTQ4OWE5M2ZhIn0");
});

test("PDFExtractor#trackingCode", () => {
  const extractor = new PDFExtractor(text);
  expect(extractor.trackingCode()).toBe("MiMKekF");
});
